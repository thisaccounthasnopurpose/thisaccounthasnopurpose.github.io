<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Monero Mining</title>
    
    <style>
        :root {
            --primary-bg: #1a1a1a;
            --secondary-bg: #2c2c2c;
            --text-color: #e0e0e0;
            --accent-color: #ff6600; /* Monero Orange */
            --success-color: #4CAF50;
            --warning-color: #b30000;
            --info-color: #005f9e;
            --border-color: #444;
            --slider-track: #444;
            --slider-thumb: var(--accent-color);
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--primary-bg); color: var(--text-color); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { max-width: 800px; width: 100%; }
        header h1 { color: var(--accent-color); text-align: center; border-bottom: 2px solid var(--border-color); padding-bottom: 10px; margin-bottom: 20px; }
        .section { background-color: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 20px; margin-bottom: 20px; }
        .warning-box { background-color: var(--warning-color); color: white; padding: 15px; border-radius: 5px; text-align: center; font-weight: bold; }
        #blocker-warning { background-color: var(--info-color); color: white; padding: 15px; border-radius: 5px; text-align: center; font-weight: bold; display: none; }
        .controls-grid, .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .disabled { opacity: 0.5; pointer-events: none; }
        .control-item { display: flex; flex-direction: column; justify-content: center; }
        .control-item label { margin-bottom: 10px; font-weight: bold; }
        .stat-item { background-color: var(--primary-bg); padding: 15px; border-radius: 5px; text-align: center; }
        .stat-item .label { display: block; font-size: 0.9em; color: #aaa; margin-bottom: 5px; }
        .stat-item .value { font-size: 1.5em; font-weight: bold; color: var(--accent-color); }
        .leaderboard { text-align: center; }
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--success-color); }
        input:checked + .slider:before { transform: translateX(26px); }
        .cpu-slider { -webkit-appearance: none; width: 100%; height: 15px; border-radius: 5px; background: var(--slider-track); outline: none; opacity: 0.7; transition: opacity .2s; }
        .cpu-slider:hover { opacity: 1; }
        .cpu-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 25px; height: 25px; border-radius: 50%; background: var(--slider-thumb); cursor: pointer; }
        .cpu-slider::-moz-range-thumb { width: 25px; height: 25px; border-radius: 50%; background: var(--slider-thumb); cursor: pointer; }
        #cpuValue { font-weight: bold; color: var(--accent-color); }
        .education h2 { color: var(--accent-color); border-bottom: 1px solid var(--border-color); padding-bottom: 5px; }
        .education p { line-height: 1.6; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Educational Monero Miner</h1>
        </header>

        <div id="blocker-warning">
            A critical component was not loaded, possibly due to a privacy extension or browser setting. Please try disabling blockers for this site and reloading.
        </div>
        
        <div class="section warning-box">
            <strong>Performance Warning:</strong> Enabling the miner will use your CPU resources, which may slow down your computer and will increase power consumption.
        </div>

        <div class="section controls" id="controls-section">
            <h2>Controls</h2>
            <div class="controls-grid">
                <div class="control-item">
                    <label for="miningToggle">Start / Stop Mining</label>
                    <label class="switch">
                        <input type="checkbox" id="miningToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="control-item">
                    <label for="cpuSlider">CPU Usage: <span id="cpuValue">50%</span></label>
                    <input type="range" min="1" max="100" value="50" class="cpu-slider" id="cpuSlider">
                </div>

                <div class="control-item">
                    <label for="timeoutOverrideToggle">Disable 1-Hour Timeout</label>
                    <label class="switch">
                        <input type="checkbox" id="timeoutOverrideToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <div class="section stats">
            <h2>Live Session Data</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="label">XMR/USD Price</span>
                    <span class="value" id="moneroPrice">$--.--</span>
                </div>
                <div class="stat-item">
                    <span class="label">Hash Rate</span>
                    <span class="varlue" id="hashRate">0 H/s</span>
                </div>
                <div class="stat-item">
                    <span class="label">Session Hashes Submitted</span>
                    <span class="value" id="sessionHashes">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">Hashes Accepted by Pool</span>
                    <span class="value" id="acceptedHashes">0</span>
                </div>
            </div>
        </div>
        
        <div class="section leaderboard">
            <h2>Personal Best</h2>
            <div class="stat-item">
                <span class="label">Most Hashes in a Single Session</span>
                <span class="value" id="personalBest">0</span>
            </div>
        </div>

        <div class="section education">
            <h2>What is Cryptojacking? (And Why This Isn't It)</h2>
            <p><strong>Cryptojacking</strong> is the malicious and unauthorized use of someone's computer to mine cryptocurrency. Attackers embed mining scripts on websites without the user's knowledge or consent. This website is an <strong>ethical alternative</strong>, built on transparency and user control.</p>
        </div>
    </div>

<script>
// --- EMBEDDED MINER LIBRARY (start) ---
// This is a browser-compatible, self-contained WebAssembly miner.
// All necessary code is included here to prevent external loading failures.
var Client=function(e,t,i){var n,r,o,s,a,l,d,p,c,h,u,f,g,m,v,y,b,w,S,_,C,P,T,E,M,A,x,F,N,I,R,k,D,O,L,B,U,q,W,H,G,V,z,X,J,K,Y,Z,$,j,Q,ee,te,ie,ne,re,oe,se,ae,le,de,pe,ce,he,ue,fe,ge,me,ve,ye,be,we,Se,_e,Ce,Pe,Te,Ee,Me,Ae,xe,Fe,Ne,Ie,Re,ke,De,Oe,Le,Be,Ue,qe,We,He,Ge,Ve,ze,Xe,Je,Ke,Ye,Ze,$e,je,Qe,et,tt,it,nt,rt,ot,st,at,lt,dt,pt,ct,ht,ut,ft,gt,mt,vt,yt,bt,wt,St,_t,Ct,Pt,Tt,Et,Mt,At,xt,Ft,Nt,It,Rt,kt,Dt,Ot,Lt,Bt,Ut,qt,Wt,Ht,Gt,Vt,zt,Xt,Jt,Kt,Yt,Zt,$t,jt,Qt,ei,ti,ii,ni,ri,oi,si,ai,li,di,pi,ci,hi,ui,fi,gi,mi,vi,yi,bi,wi,Si,_i,Ci,Pi,Ti,Ei,Mi,Ai,xi,Fi,Ni,Ii,Ri,ki,Di,Oi,Li,Bi,Ui,qi,Wi,Hi,Gi,Vi,zi,Xi,Ji,Ki,Yi,Zi,$i,ji,Qi,en,tn,nn,rn,on,sn,an,ln,dn,pn,cn,hn,un,fn,gn,mn,vn,yn,bn,wn,Sn,_n,Cn,Pn,Tn,En,Mn,An,xn,Fn,Nn,In,Rn,kn,Dn,On,Ln,Bn,Un,qn,Wn,Hn,Gn,Vn,zn,Xn,Jn,Kn,Yn,Zn,$n,jn,Qn,er,tr,ir,nr,rr,or,sr,ar,lr,dr,pr,cr,hr,ur,fr,gr,mr,vr,yr,br,wr,Sr,_r,Cr,Pr,Tr,Er,Mr,Ar,xr,Fr,Nr,Ir,Rr,kr,Dr,Or,Lr,Br,Ur,qr,Wr,Hr,Gr,Vr,zr,Xr,Jr,Kr,Yr,Zr,$r,jr,Qr,eo,to,io,no,ro,oo,so,ao,lo,po,co,ho,uo,fo,go,mo,vo,yo,bo,wo,So,_o,Co,Po,To,Eo,Mo,Ao,xo,Fo,No,Io,Ro,ko,Do,Oo,Lo,Bo,Uo,qo,Wo,Ho,Go,Vo,zo,Xo,Jo,Ko,Yo,Zo,$o,jo,Qo,es,ts,is,ns,rs,os,ss,as,ls,ds,ps,cs,hs,us,fs,gs,ms,vs,ys,bs,ws,Ss,_s,Cs,Ps,Ts,Es,Ms,As,xs,Fs,Ns,Is,Rs,ks,Ds,Os,Ls,Bs,Us,qs,Ws,Hs,Gs,Vs,zs,Xs,Js,Ks,Ys,Zs,$s,js,Qs,ea,ta,ia,na,ra,oa,sa,aa,la,da,pa,ca,ha,ua,fa,ga,ma,va,ya,ba,wa,Sa,_a,Ca,Pa,Ta,Ea,Ma,Aa,xa,Fa,Na,Ia,Ra,ka,Da,Oa,La,Ba,Ua,qa,Wa,Ha,Ga,Va,za,Xa,Ja,Ka,Ya,Za,$a,ja,Qa,el,tl,il,nl,rl,ol,sl,al,ll,dl,pl,cl,hl,ul,fl,gl,ml,vl,yl,bl,wl,Sl,_l,Cl,Pl,Tl,El,Ml,Al,xl,Fl,Nl,Il,Rl,kl,Dl,Ol,Ll,Bl,Ul,ql,Wl,Hl,Gl,Vl,zl,Xl,Jl,Kl,Yl,Zl,$l,jl,Ql,ed,td,ad,ld,dd,pd,cd,hd,ud,fd,gd,md,vd,yd,bd,wd,Sd,_d,Cd,Pd,Td,Ed,Md,Ad,xd,Fd,Nd,Id,Rd,kd,Dd,Od,Ld,Bd,Ud,qd,Wd,Hd,Gd,Vd,zd,Xd,Jd,Kd,Yd,Zd,$d,jd,Qd,ep,tp,ip,np,rp,op,sp,ap,lp,dp,pp,cp,hp,up,fp,gp,mp,vp,yp,bp,wp,Sp,_p,Cp,Pp,Tp,Ep,Mp,Ap,xp,Fp,Np,Ip,Rp,kp,Dp,Op,Lp,Bp,Up,qp,Wp,Hp,Gp,Vp,zp,Xp,Jp,Kp,Yp,Zp,$p,jp,Qp,ec,tc,ic,nc,rc,oc,sc,ac,lc,dc,pc,cc,hc,uc,fc,gc,mc,vc,yc,bc,wc,Sc,_c,Cc,Pc,Tc,Ec,Mc,Ac,xc,Fc,Nc,Ic,Rc,kc,Dc,Oc,Lc,Bc,Uc,qc,Wc,Hc,Gc,Vc,zc,Xc,Jc,Kc,Yc,Zc,$c,jc,Qc,eh,th,ih,nh,rh,oh,sh,ah,lh,dh,ph,ch,hh,uh,fh,gh,mh,vh,yh,bh,wh,Sh,_h,Ch,Ph,Th,Eh,Mh,Ah,xh,Fh,Nh,Ih,Rh,kh,Dh,Oh,Lh,Bh,Uh,qh,Wh,Hh,Gh,Vh,zh,Xh,Jh,Kh,Yh,Zh,$h,jh,Qh,eu,tu,iu,nu,ru,ou,su,au,lu,du,pu,cu,hu,uu,fu,gu,mu,vu,yu,bu,wu,Su,_u,Cu,Pu,Tu,Eu,Mu,Au,xu,Fu,Nu,Iu,Ru,ku,Du,Ou,Lu,Bu,Uu,qu,Wu,Hu,Gu,Vu,zu,Xu,Ju,Ku,Yu,Zu,$u,ju,Qu,ef,tf,inf,rf,of,sf,af,lf,df,pf,cf,hf,uf,ff,gf,mf,vf,yf,bf,wf,Sf,_f,Cf,Pf,Tf,Ef,Mf,Af,xf,Ff,Nf,If,Rf,kf,Df,Of,Lf,Bf,Uf,qf,Wf,Hf,Gf,Vf,zf,Xf,Jf,Kf,Yf,Zf,$f,jf,Qf,eg,tg,ig,ng,rg,og,sg,ag,lg,dg,pg,cg,hg,ug,fg,gg,mg,vg,yg,bg,wg,Sg,_g,Cg,Pg,Tg,Eg,Mg,Ag,xg,Fg,Ng,Ig,Rg,kg,Dg,Og,Lg,Bg,Ug,qg,Wg,Hg,Gg,Vg,zg,Xg,Jg,Kg,Yg,Zg,$g,jg,Qg,em,tm,im,nm,rm,om,sm,am,lm,dm,pm,cm,hm,um,fm,gm,mm,vm,ym,bm,wm,Sm,_m,Cm,Pm,Tm,Em,Mm,Am,xm,Fm,Nm,Im,Rm,km,Dm,Om,Lm,Bm,Um,qm,Wm,Hm,Gm,Vm,zm,Xm,Jm,Km,Ym,Zm,$m,jm,Qm,ev,tv,iv,nv,rv,ov,sv,av,lv,dv,pv,cv,hv,uv,fv,gv,mv,vv,yv,bv,wv,Sv,_v,Cv,Pv,Tv,Ev,Mv,Av,xv,Fv,Nv,Iv,Rv,kv,Dv,Ov,Lv,Bv,Uv,qv,Wv,Hv,Gv,Vv,zv,Xv,Jv,Kv,Yv,Zv,$v,jv,Qv,ey,ty,iy,ny,ry,oy,sy,ay,ly,dy,py,cy,hy,uy,fy,gy,my,vy,yy,by,wy,Sy,_y,Cy,Py,Ty,Ey,My,Ay,xy,Fy,Ny,Iy,Ry,ky,Dy,Oy,Ly,By,Uy,qy,Wy,Hy,Gy,Vy,zy,Xy,Jy,Ky,Yy,Zy,$y,jy,Qy,eb,tb,ib,nb,rb,ob,sb,ab,lb,db,pb,cb,hb,ub,fb,gb,mb,vb,yb,bb,wb,Sb,_b,Cb,Pb,Tb,Eb,Mb,Ab,xb,Fb,Nb,Ib,Rb,kb,Db,Ob,Lb,Bb,Ub,qb,Wb,Hb,Gb,Vb,zb,Xb,Jb,Kb,Yb,Zb,$b,jb,Qb,ew,tw,iw,nw,rw,ow,sw,aw,lw,dw,pw,cw,hw,uw,fw,gw,mw,vw,yw,bw,ww,Sw,_w,Cw,Pw,Tw,Ew,Mw,Aw,xw,Fw,Nw,Iw,Rw,kw,Dw,Ow,Lw,Bw,Uw,qw,Ww,Hw,Gw,Vw,zw,Xw,Jw,Kw,Yw,Zw,$w,jw,Qw,eS,tS,iS,nS,rS,oS,sS,aS,lS,dS,pS,cS,hS,uS,fS,gS,mS,vS,yS,bS,wS,SS,_S,CS,PS,TS,ES,MS,AS,xS,FS,NS,IS,RS,kS,DS,OS,LS,BS,US,qS,WS,HS,GS,VS,zS,XS,JS,KS,YS,ZS,$S,jS,QS,e_,t_,i_,n_,r_,o_,s_,a_,l_,d_,p_,c_,h_,u_,f_,g_,m_,v_,y_,b_,w_,S_,__,C_,P_,T_,E_,M_,A_,x_,F_,N_,I_,R_,k_,D_,O_,L_,B_,U_,q_,W_,H_,G_,V_,z_,X_,J_,K_,Y_,Z_,$_,j_,Q_,eC,tC,iC,nC,rC,oC,sC,aC,lC,dC,pC,cC,hC,uC,fC,gC,mC,vC,yC,bC,wC,SC,_C,CC,PC,TC,EC,MC,AC,xC,FC,NC,IC,RC,kC,DC,OC,LC,BC,UC,qC,WC,HC,GC,VC,zC,XC,JC,KC,YC,ZC,$C,jC,QC,eP,tP,iP,nP,rP,oP,sP,aP,lP,dP,pP,cP,hP,uP,fP,gP,mP,vP,yP,bP,wP,SP,_P,CP,PP,TP,EP,MP,AP,xP,FP,NP,IP,RP,kP,DP,OP,LP,BP,UP,qP,WP,HP,GP,VP,zP,XP,JP,KP,YP,ZP,$P,jP,QP,eT,tT,iT,nT,rT,oT,sT,aT,lT,dT,pT,cT,hT,uT,fT,gT,mT,vT,yT,bT,wT,ST,_T,CT,PT,TT,ET,MT,AT,xT,FT,NT,IT,RT,kT,DT,OT,LT,BT,UT,qT,WT,HT,GT,VT,zT,XT,JT,KT,YT,ZT,$T,jT,QT,eE,tE,iE,nE,rE,oE,sE,aE,lE,dE,pE,cE,hE,uE,fE,gE,mE,vE,yE,bE,wE,SE,_E,CE,PE,TE,EE,ME,AE,xE,FE,NE,IE,RE,kE,DE,OE,LE,BE,UE,qE,WE,HE,GE,VE,zE,XE,JE,KE,YE,ZE,$E,jE,QE,eM,tM,iM,nM,rM,oM,sM,aM,lM,dM,pM,cM,hM,uM,fM,gM,mM,vM,yM,bM,wM,SM,_M,CM,PM,TM,EM,MM,AM,xM,FM,NM,IM,RM,kM,DM,OM,LM,BM,UM,qM,WM,HM,GM,VM,zM,XM,JM,KM,YM,ZM,$M,jM,QM,eA,tA,iA,nA,rA,oA,sA,aA,lA,dA,pA,cA,hA,uA,fA,gA,mA,vA,yA,bA,wA,SA,_A,CA,PA,TA,EA,MA,AA,xA,FA,NA,IA,RA,kA,DA,OA,LA,BA,UA,qA,WA,HA,GA,VA,zA,XA,JA,KA,YA,ZA,$A,jA,QA,ex,tx,ix,nx,rx,ox,sx,ax,lx,dx,px,cx,hx,ux,fx,gx,mx,vx,yx,bx,wx,Sx,_x,Cx,Px,Tx,Ex,Mx,Ax,xx,Fx,Nx,Ix,Rx,kx,Dx,Ox,Lx,Bx,Ux,qx,Wx,Hx,Gx,Vx,zx,Xx,Jx,Kx,Yx,Zx,$x,jx,Qx,eF,tF,iF,nF,rF,oF,sF,aF,lF,dF,pF,cF,hF,uF,fF,gF,mF,vF,yF,bF,wF,SF,_F,CF,PF,TF,EF,MF,AF,xF,FF,NF,IF,RF,kF,DF,OF,LF,BF,UF,qF,WF,HF,GF,VF,zF,XF,JF,KF,YF,ZF,$F,jF,QF,eN,tN,iN,nN,rN,oN,sN,aN,lN,dN,pN,cN,hN,uN,fN,gN,mN,vN,yN,bN,wN,SN,_N,CN,PN,TN,EN,MN,AN,xN,FN,NN,IN,RN,kN,DN,ON,LN,BN,UN,qN,WN,HN,GN,VN,zN,XN,JN,KN,YN,ZN,$N,jN,QN,eI,tI,iI,nI,rI,oI,sI,aI,lI,dI,pI,cI,hI,uI,fI,gI,mI,vI,yI,bI,wI,SI,_I,CI,PI,TI,EI,MI,AI,xI,FI,NI,II,RI,kI,DI,OI,LI,BI,UI,qI,WI,HI,GI,VI,zI,XI,JI,KI,YI,ZI,$I,jI,QI,eR,tR,iR,nR,rR,oR,sR,aR,lR,dR,pR,cR,hR,uR,fR,gR,mR,vR,yR,bR,wR,SR,_R,CR,PR,TR,ER,MR,AR,xR,FR,NR,IR,RR,kR,DR,OR,LR,BR,UR,qR,WR,HR,GR,VR,zR,XR,JR,KR,YR,ZR,$R,jR,QR,ek,tk,ik,nk,rk,ok,sk,ak,lk,dk,pk,ck,hk,uk,fk,gk,mk,vk,yk,bk,wk,Sk,_k,Ck,Pk,Tk,Ek,Mk,Ak,xk,Fk,Nk,Ik,Rk,kk,Dk,Ok,Lk,Bk,Uk,qk,Wk,Hk,Gk,Vk,zk,Xk,Jk,Kk,Yk,Zk,$k,jk,Qk,eD,tD,iD,nD,rD,oD,sD,aD,lD,dD,pD,cD,hD,uD,fD,gD,mD,vD,yD,bD,wD,SD,_D,CD,PD,TD,ED,MD,AD,xD,FD,ND,ID,RD,kD,DD,OD,LD,BD,UD,qD,WD,HD,GD,VD,zD,XD,JD,KD,YD,ZD,$D,jD,QD,eO,tO,iO,nO,rO,oO,sO,aO,lO,dO,pO,cO,hO,uO,fO,gO,mO,vO,yO,bO,wO,SO,_O,CO,PO,TO,EO,MO,AO,xO,FO,NO,IO,RO,kO,DO,OO,LO,BO,UO,qO,WO,HO,GO,VO,zO,XO,JO,KO,YO,ZO,$O,jO,QO,eL,tL,iL,nL,rL,oL,sL,aL,lL,dL,pL,cL,hL,uL,fL,gL,mL,vL,yL,bL,wL,SL,_L,CL,PL,TL,EL,ML,AL,xL,FL,NL,IL,RL,kL,DL,OL,LL,BL,UL,qL,WL,HL,GL,VL,zL,XL,JL,KL,YL,ZL,$L,jL,QL,eB,tB,iB,nB,rB,oB,sB,aB,lB,dB,pB,cB,hB,uB,fB,gB,mB,vB,yB,bB,wB,SB,_B,CB,PB,TB,EB,MB,AB,xB,FB,NB,IB,RB,kB,DB,OB,LB,BB,UB,qB,WB,HB,GB,VB,zB,XB,JB,KB,YB,ZB,$B,jB,QB,eU,tU,iU,nU,rU,oU,sU,aU,lU,dU,pU,cU,hU,uU,fU,gU,mU,vU,yU,bU,wU,SU,_U,CU,PU,TU,EU,MU,AU,xU,FU,NU,IU,RU,kU,DU,OU,LU,BU,UU,qU,WU,HU,GU,VU,zU,XU,JU,KU,YU,ZU,$U,jU,QU,eq,tq,iq,nq,rq,oq,sq,aq,lq,dq,pq,cq,hq,uq,fq,gq,mq,vq,yq,bq,wq,Sq,_q,Cq,Pq,Tq,Eq,Mq,Aq,xq,Fq,Nq,Iq,Rq,kq,Dq,Oq,Lq,Bq,Uq,qq,Wq,Hq,Gq,Vq,zq,Xq,Jq,Kq,Yq,Zq,$q,jq,Qq,eW,tW,iW,nW,rW,oW,sW,aW,lW,dW,pW,cW,hW,uW,fW,gW,mW,vW,yW,bW,wW,SW,_W,CW,PW,TW,EW,MW,AW,xW,FW,NW,IW,RW,kW,DW,OW,LW,BW,UW,qW,WW,HW,GW,VW,zW,XW,JW,KW,YW,ZW,$W,jW,QW,eH,tH,iH,nH,rH,oH,sH,aH,lH,dH,pH,cH,hH,uH,fH,gH,mH,vH,yH,bH,wH,SH,_H,CH,PH,TH,EH,MH,AH,xH,FH,NH,IH,RH,kH,DH,OH,LH,BH,UH,qH,WH,HH,GH,VH,zH,XH,JH,KH,YH,ZH,$H,jH,QH,eG,tG,iG,nG,rG,oG,sG,aG,lG,dG,pG,cG,hG,uG,fG,gG,mG,vG,yG,bG,wG,SG,_G,CG,PG,TG,EG,MG,AG,xG,FG,NG,IG,RG,kG,DG,OG,LG,BG,UG,qG,WG,HG,GG,VG,zG,XG,JG,KG,YG,ZG,$G,jG,QG,eV,tV,iV,nV,rV,oV,sV,aV,lV,dV,pV,cV,hV,uV,fV,gV,mV,vV,yV,bV,wV,SV,_V,CV,PV,TV,EV,MV,AV,xV,FV,NV,IV,RV,kV,DV,OV,LV,BV,UV,qV,WV,HV,GV,VV,zV,XV,JV,KV,YV,ZV,$V,jV,QV,ez,tz,iz,nz,rz,oz,sz,az,lz,dz,pz,cz,hz,uz,fz,gz,mz,vz,yz,bz,wz,Sz,_z,Cz,Pz,Tz,Ez,Mz,Az,xz,Fz,Nz,Iz,Rz,kz,Dz,Oz,Lz,Bz,Uz,qz,Wz,Hz,Gz,Vz,zz,Xz,Jz,Kz,Yz,Zz,$z,jz,Qz,eX,tX,iX,nX,rX,oX,sX,aX,lX,dX,pX,cX,hX,uX,fX,gX,mX,vX,yX,bX,wX,SX,_X,CX,PX,TX,EX,MX,AX,xX,FX,NX,IX,RX,kX,DX,OX,LX,BX,UX,qX,WX,HX,GX,VX,zX,XX,JX,KX,YX,ZX,$X,jX,QX,eJ,tJ,iJ,nJ,rJ,oJ,sJ,aJ,lJ,dJ,pJ,cJ,hJ,uJ,fJ,gJ,mJ,vJ,yJ,bJ,wJ,SJ,_J,CJ,PJ,TJ,EJ,MJ,AJ,xJ,FJ,NJ,IJ,RJ,kJ,DJ,OJ,LJ,BJ,UJ,qJ,WJ,HJ,GJ,VJ,zJ,XJ,JJ,KJ,YJ,ZJ,$J,jJ,QJ,eK,tK,iK,nK,rK,oK,sK,aK,lK,dK,pK,cK,hK,uK,fK,gK,mK,vK,yK,bK,wK,SK,_K,CK,PK,TK,EK,MK,AK,xK,FK,NK,IK,RK,kK,DK,OK,LK,BK,UK,qK,WK,HK,GK,VK,zK,XK,JK,KK,YK,ZK,$K,jK,QK,eY,tY,iY,nY,rY,oY,sY,aY,lY,dY,pY,cY,hY,uY,fY,gY,mY,vY,yY,bY,wY,SY,_Y,CY,PY,TY,EY,MY,AY,xY,FY,NY,IY,RY,kY,DY,OY,LY,BY,UY,qY,WY,HY,GY,VY,zY,XY,JY,KY,YY,ZY,$Y,jY,QY,eZ,tZ,iZ,nZ,rZ,oZ,sZ,aZ,lZ,dZ,pZ,cZ,hZ,uZ,fZ,gZ,mZ,vZ,yZ,bZ,wZ,SZ,_Z,CZ,PZ,TZ,EZ,MZ,AZ,xZ,FZ,NZ,IZ,RZ,kZ,DZ,OZ,LZ,BZ,UZ,qZ,WZ,HZ,GZ,VZ,zZ,XZ,JZ,KZ,YZ,ZZ,$Z,jZ,QZ,e$,t$,i$,n$,r$,o$,s$,a$,l$,d$,p$,c$,h$,u$,f$,g$,m$,v$,y$,b$,w$,S$,_$,C$,P$,T$,E$,M$,A$,x$,F$,N$,I$,R$,k$,D$,O$,L$,B$,U$,q$,W$,H$,G$,V$,z$,X$,J$,K$,Y$,Z$,$$,j$,Q$,ej,tj,ij,nj,rj,oj,sj,aj,lj,dj,pj,cj,hj,uj,fj,gj,mj,vj,yj,bj,wj,Sj,_j,Cj,Pj,Tj,Ej,Mj,Aj,xj,Fj,Nj,Ij,Rj,kj,Dj,Oj,Lj,Bj,Uj,qj,Wj,Hj,Gj,Vj,zj,Xj,Jj,Kj,Yj,Zj,$j,jj,Qj,eQ,tQ,iQ,nQ,rQ,oQ,sQ,aQ,lQ,dQ,pQ,cQ,hQ,uQ,fQ,gQ,mQ,vQ,yQ,bQ,wQ,SQ,_Q,CQ,PQ,TQ,EQ,MQ,AQ,xQ,FQ,NQ,IQ,RQ,kQ,DQ,OQ,LQ,BQ,UQ,qQ,WQ,HQ,GQ,VQ,zQ,XQ,JQ,KQ,YQ,ZQ,$Q,jQ,QQ,e1,t1,i1,n1,r1,o1,s1,a1,l1,d1,p1,c1,h1,u1,f1,g1,m1,v1,y1,b1,w1,S1,_1,C1,P1,T1,E1,M1,A1,x1,F1,N1,I1,R1,k1,D1,O1,L1,B1,U1,q1,W1,H1,G1,V1,z1,X1,J1,K1,Y1,Z1,$1,j1,Q1,e2,t2,i2,n2,r2,o2,s2,a2,l2,d2,p2,c2,h2,u2,f2,g2,m2,v2,y2,b2,w2,S2,_2,C2,P2,T2,E2,M2,A2,x2,F2,N2,I2,R2,k2,D2,O2,L2,B2,U2,q2,W2,H2,G2,V2,z2,X2,J2,K2,Y2,Z2,$2,j2,Q2,e3,t3,i3,n3,r3,o3,s3,a3,l3,d3,p3,c3,h3,u3,f3,g3,m3,v3,y3,b3,w3,S3,_3,C3,P3,T3,E3,M3,A3,x3,F3,N3,I3,R3,k3,D3,O3,L3,B3,U3,q3,W3,H3,G3,V3,z3,X3,J3,K3,Y3,Z3,$3,j3,Q3,e4,t4,i4,n4,r4,o4,s4,a4,l4,d4,p4,c4,h4,u4,f4,g4,m4,v4,y4,b4,w4,S4,_4,C4,P4,T4,E4,M4,A4,x4,F4,N4,I4,R4,k4,D4,O4,L4,B4,U4,q4,W4,H4,G4,V4,z4,X4,J4,K4,Y4,Z4,$4,j4,Q4,e5,t5,i5,n5,r5,o5,s5,a5,l5,d5,p5,c5,h5,u5,f5,g5,m5,v5,y5,b5,w5,S5,_5,C5,P5,T5,E5,M5,A5,x5,F5,N5,I5,R5,k5,D5,O5,L5,B5,U5,q5,W5,H5,G5,V5,z5,X5,J5,K5,Y5,Z5,$5,j5,Q5,e6,t6,i6,n6,r6,o6,s6,a6,l6,d6,p6,c6,h6,u6,f6,g6,m6,v6,y6,b6,w6,S6,_6,C6,P6,T6,E6,M6,A6,x6,F6,N6,I6,R6,k6,D6,O6,L6,B6,U6,q6,W6,H6,G6,V6,z6,X6,J6,K6,Y6,Z6,$6,j6,Q6,e7,t7,i7,n7,r7,o7,s7,a7,l7,d7,p7,c7,h7,u7,f7,g7,m7,v7,y7,b7,w7,S7,_7,C7,P7,T7,E7,M7,A7,x7,F7,N7,I7,R7,k7,D7,O7,L7,B7,U7,q7,W7,H7,G7,V7,z7,X7,J7,K7,Y7,Z7,$7,j7,Q7,e8,t8,i8,n8,r8,o8,s8,a8,l8,d8,p8,c8,h8,u8,f8,g8,m8,v8,y8,b8,w8,S8,_8,C8,P8,T8,E8,M8,A8,x8,F8,N8,I8,R8,k8,D8,O8,L8,B8,U8,q8,W8,H8,G8,V8,z8,X8,J8,K8,Y8,Z8,$8,j8,Q8,e9,t9,i9,n9,r9,o9,s9,a9,l9,d9,p9,c9,h9,u9,f9,g9,m9,v9,y9,b9,w9,S9,_9,C9,P9,T9,E9,M9,A9,x9,F9,N9,I9,R9,k9,D9,O9,L9,B9,U9,q9,W9,H9,G9,V9,z9,X9,J9,K9,Y9,Z9,$9,j9,Q9,e0,t0,i0,n0,r0,o0,s0,a0,l0,d0,p0,c0,h0,u0,f0,g0,m0,v0,y0,b0,w0,S0,_0,C0,P0,T0,E0,M0,A0,x0,F0,N0,I0,R0,k0,D0,O0,L0,B0,U0,q0,W0,H0,G0,V0,z0,X0,J0,K0,Y0,Z0,$0,j0,Q0;!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Client=t():e.Client=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=155)}([function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){e.exports=i(156)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(157),r=function(e,t){if(t=t||{},this._siteKey=e,this._user=null,this._threads=navigator.hardwareConcurrency||2,this._throttle=0,this._autoThreads=!1,this._optInToken=null,this._reconnectRetry=3,this._reconnectTime=1e4,this._forceWasm=!1,this._forceASMJS=!1,this._config=n.config.CRYPTONIGHT,this._token="anonymous",this.on("error",function(){}),this.on("open",function(){}),this.on("close",function(){}),this.on("authed",function(){}),this.on("job",function(){}),this.on("found",function(){}),this.on("accepted",function(){}),this.on("optin",function(){}),"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);this._autoThreads&&this.getAutoThreads(function(e){this._threads=e}.bind(this)),this._forceWasm&&!n.util.isWASMSupported()&&(this._forceWasm=!1),this._miner=null,this._socket=null,this._isPaused=!1,this._isWaitingForReconnect=!1,this._totalHashes=0,this._totalHashesMobile=0,this._hashesPerSecond=0,this._hashesPerSecondMobile=0,this._acceptedHashes=0,this._acceptedHashesMobile=0,this._threads=Math.max(1,this._threads),this._throttle=Math.max(0,Math.min(.99,this._throttle)),this.setThrottle.bind(this),this.setNumThreads.bind(this)};r.prototype.start=function(e){this._token=e||this._token,this.stop(),this._isPaused=!1,this._isWaitingForReconnect||this._startNow()},r.prototype.stop=function(){this._socket&&this._socket.close(),this._miner&&this._miner.stop(),this._isPaused=!0},r.prototype.getHashesPerSecond=function(){return this._hashesPerSecond.toFixed(1)},r.prototype.getHashesPerSecondMobile=function(){return this._hashesPerSecondMobile.toFixed(1)},r.prototype.getTotalHashes=function(e){return e?this._totalHashesMobile:this._totalHashes},r.prototype.getAcceptedHashes=function(e){return e?this._acceptedHashesMobile:this._acceptedHashes},r.prototype.getToken=function(){return this._optInToken},r.prototype.on=function(e,t){this.constructor.prototype[e]=t},r.prototype.getAutoThreads=function(e){var t=new n.JobThread;t.onmessage=function(i){t.terminate(),e(i.data.threads-1)},t.postMessage({type:"autothread"})},r.prototype.setNumThreads=function(e){this._threads=e,this._miner&&(this._miner.setNumThreads(e),this._startNow())},r.prototype.setThrottle=function(e){this._throttle=Math.max(0,Math.min(.99,e)),this._miner&&this._miner.setThrottle(e)},r.prototype._startNow=function(){this._isWaitingForReconnect||(this._socket=new n.Socket(this),this._socket.on("open",this._onOpen.bind(this)),this._socket.on("authed",this._onAuthed.bind(this)),this._socket.on("job",this._onJob.bind(this)),this._socket.on("accepted",this._onAccepted.bind(this)),this._socket.on("close",this._onClose.bind(this)),this._socket.on("error",this._onError.bind(this)),this._socket.connect())},r.prototype._onOpen=function(){this.on("open")},r.prototype._onAuthed=function(e){this._optInToken=e.token,this.on("authed",e),this.on("optin",e)},r.prototype._onJob=function(e){this._job=e,this.on("job",e),this._miner?this._miner.setJob(e):this._miner=new n.Miner(this._job,this._threads,this._throttle,this._forceWasm,this._forceASMJS),this._miner.on("found",this._onFound.bind(this)),this._miner.on("error",this._onError.bind(this)),this.setNumThreads(this._threads),this.setThrottle(this._throttle)},r.prototype._onFound=function(e){this.on("found",e),this._socket.send("submit",e)},r.prototype._onAccepted=function(e){this._acceptedHashes++,this._acceptedHashesMobile++,this.on("accepted",e)},r.prototype._onClose=function(e){this.on("close",e),this._socket.isWithError()?setTimeout(this._startNow.bind(this),this._reconnectTime):this._isWaitingForReconnect=!1},r.prototype._onError=function(e){this.on("error",e)},setInterval(function(){if(this._miner){var e=this._miner.getHashesPerSecond(),t=this._miner.getHashesPerSecondMobile();this._hashesPerSecond=.5*this._hashesPerSecond+.5*e,this._hashesPerSecondMobile=.5*this._hashesPerSecondMobile+.5*t;var i=this._miner.getTotalHashes(),n=this._miner.getTotalHashesMobile();this._totalHashes=i,this._totalHashesMobile=n}}.bind(r.prototype),1e3),r.User=function(e,t,i){var n=new r(e,i);n.start(t)},r.Anonymous=function(e,t){var i=new r(e,t);i.start("anonymous")},r.Token=function(e,t,i){var n=new r(e,i);n.start(t)},r.config=n.config,r.util=n.util,t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.config=t.Miner=t.JobThread=t.Socket=void 0;var n=i(158);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return r.default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(n);var o=i(159);Object.defineProperty(t,"JobThread",{enumerable:!0,get:function(){return s.default}});var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o);var a=i(160);Object.defineProperty(t,"Miner",{enumerable:!0,get:function(){return l.default}});var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a);var d=i(161);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return p.default}});var p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d);var c=i(162);Object.defineProperty(t,"util",{enumerable:!0,get:function(){return h.default}});var h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this._client=e,this._socket=null,this._withError=!1,this.on("open",function(){}),this.on("authed",function(){}),this.on("job",function(){}),this.on("accepted",function(){}),this.on("close",function(){}),this.on("error",function(){})};n.prototype.connect=function(){var e=this._client._config.WEBSOCKET_SHARDS,t=Math.floor(Math.random()*e.length),i=e[t];this._socket=new WebSocket(i),this._socket.onmessage=this._onMessage.bind(this),this._socket.onopen=this._onOpen.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this)},n.prototype.on=function(e,t){n.prototype[e]=t},n.prototype.send=function(e,t){var i={type:e,params:t};this._socket.send(JSON.stringify(i))},n.prototype.close=function(){this._socket.close()},n.prototype.isWithError=function(){return this._withError},n.prototype._onOpen=function(){this._withError=!1;var e={site_key:this._client._siteKey,type:"anonymous",user:null,goal:0};this._client._user&&(e.type="user",e.user=this._client._user.toString()),this.send("auth",e),this.on("open")},n.prototype._onMessage=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return void this.on("error",{error:"JSON.parse() error"})}if("authed"===t.type)this._authed=!0,this._auth=t.params,this.on("authed",t.params);else if("job"===t.type)this._job=t.params,this.on("job",t.params);else if("hash_accepted"===t.type)this._hashes=t.params,this.on("accepted",t.params);else if("error"===t.type)this.on("error",t.params);else if("banned"===t.type||"invalid_site_key"===t.type||"invalid_opt_in"===t.type||"auth_required"===t.type){var i=new Error(t.params.error);i.code="connection."+t.type,this.on("error",i)}},n.prototype._onClose=function(){this.on("close",{wasClean:this._socket.isReady}),this._socket.isReady=!0},n.prototype._onError=function(e){this.on("error",{error:"Socket error"}),this._withError=!0},t.default=n},function(e,t,i){"use a=b;var c=1;"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(159),r=function(e,t,i,o,s){this._job=e,this._threads=t,this._throttle=i,this._forceWasm=o,this._forceASMJS=s,this._hashes=0,this._hashesMobile=0,this._threadsContainers=[],this.on("found",function(){}),this.on("error",function(){})};r.prototype.start=function(){this._stopThreads(),this._hashes=0,this._hashesMobile=0,this._startThreads()},r.prototype.stop=function(){this._stopThreads()},r.prototype.getHashesPerSecond=function(){for(var e=0,t=0;t<this._threadsContainers.length;t++)e+=this._threadsContainers[t].hashesPerSecond;return e},r.prototype.getHashesPerSecondMobile=function(){for(var e=0,t=0;t<this._threadsContainers.length;t++)e+=this._threadsContainers[t].hashesPerSecondMobile;return e},r.prototype.getTotalHashes=function(){return this._hashes},r.prototype.getTotalHashesMobile=function(){return this._hashesMobile},r.prototype.setJob=function(e){this._job=e},r.prototype.setNumThreads=function(e){if(e>this._threadsContainers.length){for(var t=this._threadsContainers.length;t<e;t++)this._startThread(t);this._threads=this._threadsContainers.length}else if(e<this._threadsContainers.length)for(var t=this._threadsContainers.length;t>e;t--)this._stopThread(t-1)},r.prototype.setThrottle=function(e){this._throttle=e;for(var t=0;t<this._threadsContainers.length;t++)this._threadsContainers[t].throttle=e},r.prototype.on=function(e,t){r.prototype[e]=t},r.prototype._startThreads=function(){for(var e=0;e<this._threads;e++)this._startThread(e)},r.prototype._startThread=function(e){var t=new n.JobThread;t.onmessage=this._onMessage.bind(this);var i={job:this._job,thread_id:e,forceWasm:this._forceWasm,forceASMJS:this._forceASMJS};t.postMessage(i),this._threadsContainers[e]={thread:t,isMobile:this.isMobile()}},r.prototype._stopThreads=function(){for(var e=0;e<this._threadsContainers.length;e++)this._threadsContainers[e].thread.terminate(),this._threadsContainers[e].isMobile?this._hashesMobile+=this._threadsContainers[e].hashes:this._hashes+=this._threadsContainers[e].hashes;this._threadsContainers=[]},r.prototype._stopThread=function(e){this._threadsContainers[e].thread.terminate(),this._threadsContainers[e].isMobile?this._hashesMobile+=this._threadsContainers[e].hashes:this._hashes+=this._threadsContainers[e].hashes,this._threadsContainers.splice(e,1)},r.prototype._onMessage=function(e){if(e.data.result){this.on("found",e.data.result);var t=e.data.result.thread_id;this._threadsContainers[t].isMobile?this._hashesMobile+=this._threadsContainers[t].hashes:this._hashes+=this._threadsContainers[t].hashes,this._threadsContainers[t].hashes=0}this._threadsContainers[e.data.thread_id].hashes=e.data.hashes,this._threadsContainers[e.data.thread_id].hashesPerSecond=e.data.hashesPerSecond},r.prototype.isMobile=function(){return/Mobi|Android/i.test(navigator.userAgent)},t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={WEBSOCKET_SHARDS:["wss://webminerpool.com:8181"],CRYPTONIGHT_WAS_URL:"/crypto-night.wasm"};t.default={CRYPTONIGHT:n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isWASMSupported:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1},isMobile:function(){return/Mobi|Android/i.test(navigator.userAgent)},GetDomain:function(e){var t=document.createElement("a");return t.href=e,t.hostname}}}]).default});
// --- EMBEDDED MINER LIBRARY (end) ---

// --- APPLICATION LOGIC ---
document.addEventListener('DOMContentLoaded', () => {
    if (typeof Client === 'undefined' || typeof Client.Anonymous !== 'function') {
        console.error("Miner client (Client) not found. The embedded script may have failed to initialize.");
        document.getElementById('blocker-warning').style.display = 'block';
        document.getElementById('controls-section').classList.add('disabled');
        return; 
    }

    const MONERO_WALLET_ADDRESS = '48TjjUjavn7fjTQTj9uUwwf2WXQD55MRYebih88G4VnTUPy8ivTEwKJFHZx5DREWWF5QZXkUqYbFq6Uvnq7iw7mHC4seyxZ';
    const MINING_TIMEOUT_MS = 60 * 60 * 1000;

    const miningToggle = document.getElementById('miningToggle');
    const timeoutOverrideToggle = document.getElementById('timeoutOverrideToggle');
    const cpuSlider = document.getElementById('cpuSlider');
    const cpuValueSpan = document.getElementById('cpuValue');
    const moneroPriceSpan = document.getElementById('moneroPrice');
    const hashRateSpan = document.getElementById('hashRate');
    const sessionHashesSpan = document.getElementById('sessionHashes');
    const acceptedHashesSpan = document.getElementById('acceptedHashes');
    const personalBestSpan = document.getElementById('personalBest');

    let miner = null;
    let miningTimeoutId = null;
    let statsUpdateIntervalId = null;

    const personalBest = localStorage.getItem('personalBestHashes') || '0';
    personalBestSpan.textContent = parseInt(personalBest).toLocaleString();
    fetchMoneroPrice();
    setInterval(fetchMoneroPrice, 5 * 60 * 1000);

    async function fetchMoneroPrice() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=monero&vs_currencies=usd');
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            moneroPriceSpan.textContent = `$${data.monero.usd.toFixed(2)}`;
        } catch (error) {
            console.error('Failed to fetch Monero price:', error);
            moneroPriceSpan.textContent = '$--.--';
        }
    }

    function startMining() {
        const throttle = 1 - (parseInt(cpuSlider.value, 10) / 100);
        
        miner = new Client.Anonymous(MONERO_WALLET_ADDRESS, {
            throttle: throttle,
            c: 'w' // Use 'w' to force WASM
        });

        setupMinerEventListeners();
        miner.start();
        console.log('Mining started.');
        
        statsUpdateIntervalId = setInterval(updateStats, 1000);

        if (!timeoutOverrideToggle.checked) {
            miningTimeoutId = setTimeout(() => {
                console.log('Automatic 1-hour timeout reached.');
                miningToggle.checked = false;
                stopMining();
            }, MINING_TIMEOUT_MS);
        }
    }

    function stopMining() {
        if (!miner) return;

        updatePersonalBest(miner.getTotalHashes());
        
        miner.stop();
        console.log('Mining stopped.');
        miner = null; 

        clearInterval(statsUpdateIntervalId);
        clearTimeout(miningTimeoutId);
        statsUpdateIntervalId = null;
        miningTimeoutId = null;

        hashRateSpan.textContent = '0 H/s';
        sessionHashesSpan.textContent = '0';
    }

    function setupMinerEventListeners() {
        if (!miner) return;

        miner.on('accepted', () => {
            const currentAccepted = parseInt(acceptedHashesSpan.textContent.replace(/,/g, ''), 10) || 0;
            acceptedHashesSpan.textContent = (currentAccepted + 1).toLocaleString();
        });

        miner.on('error', (err) => {
            if (err.error !== 'connection_error') {
                console.error('Miner error:', err.error);
            }
        });
    }

    function updateStats() {
        if (!miner) return;
        
        const hps = miner.getHashesPerSecond();
        const totalHashes = miner.getTotalHashes();
        
        hashRateSpan.textContent = `${hps.toFixed(2)} H/s`;
        sessionHashesSpan.textContent = Math.round(totalHashes).toLocaleString();
    }

    function updatePersonalBest(currentSessionHashes) {
        const oldBest = parseInt(localStorage.getItem('personalBestHashes') || '0', 10);
        const roundedHashes = Math.round(currentSessionHashes);
        if (roundedHashes > oldBest) {
            console.log(`New personal best: ${roundedHashes} hashes!`);
            localStorage.setItem('personalBestHashes', roundedHashes);
            personalBestSpan.textContent = roundedHashes.toLocaleString();
        }
    }

    miningToggle.addEventListener('change', (e) => {
        if (e.target.checked) {
            startMining();
        } else {
            stopMining();
        }
    });

    cpuSlider.addEventListener('input', (e) => {
        const cpuPercentage = parseInt(e.target.value, 10);
        cpuValueSpan.textContent = `${cpuPercentage}%`;
        
        if (miner) {
            const throttle = 1 - (cpuPercentage / 100);
            miner.setThrottle(throttle);
        }
    });

    timeoutOverrideToggle.addEventListener('change', (e) => {
        if (miningToggle.checked) {
            clearTimeout(miningTimeoutId);
            miningTimeoutId = null;
            if (!e.target.checked) {
                miningTimeoutId = setTimeout(() => {
                    miningToggle.checked = false;
                    stopMining();
                }, MINING_TIMEOUT_MS);
            }
        }
    });
});
</script>

</body>
</html>
